<html>

<body>
<div id="fb-root"></div>
<script>
  // Additional JS functions here
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '183408515138929', // App ID
      channelUrl : '//crm-anchorage-2615.herokuapp.com/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

	FB.getLoginStatus(function(response) {
  		if (response.status === 'connected') {
    		// connected
    		FB.api('/me/friends', function(response) {
				var amizades = "";
				for(var i = 0; i < response.data.length; i++)
				{
					amizades += '<a href="http://www.facebook.com/'+response.data[i].id+'">'+response.data[i].name + "</a><br />";
				}
				var content = document.getElementById('content');
				content.innerHTML = amizades;
			});
		document.getElementById('logout-button').innerHTML = '<a href="#" onclick="javascript:logout()">Deslogar</a>';	
  		} else if (response.status === 'not_authorized') {
    		// not_authorized
    		login();
  		} else {
    		// not_logged_in
    		login();
  		}
 	});
    // Additional init code here

  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
        	location.reload();
        } else {
            // cancelled
			document.getElementById('content').innerHTML = "Loga ai rapaz";
        }
    });
};

function logout() {
	FB.logout(function(response) {
		alert("Deslogado, rapaz");
	});
};
</script>
<div id="logout-button"></div>
<div id="content"></div>
</body>

</html>
